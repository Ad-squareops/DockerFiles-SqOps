FROM ubuntu:20.04
ENV TZ=Australia/Sydney
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
RUN apt update -y ; apt -y install curl apt-utils ; apt install -y software-properties-common apt-transport-https ; add-apt-repository ppa:ondrej/php ; echo 'deb http://download.opensuse.org/repositories/home:/cabelo/xUbuntu_20.04/ /' | tee /etc/apt/sources.list.d/home:cabelo.list ; curl -fsSL https://download.opensuse.org/repositories/home:cabelo/xUbuntu_20.04/Release.key |gpg --dearmor | tee /etc/apt/trusted.gpg.d/home_cabelo.gpg > /dev/null ; apt update -y ; apt install -y php8.1-common php8.1-gd php8.1-ldap php8.1-odbc php8.1-xsl php8.1-apcu php8.1-curl php8.1-gmp php8.1-opcache php8.1-mbstring php8.1-pgsql php8.1-imagick php8.1-memcached php8.1-bz2 php8.1-ds php8.1-imap php8.1-cgi php8.1-mysql php8.1-cli php8.1-fpm php8.1-xml php8.1-xmlrpc php8.1-dev php8.1-soap php8.1-zip php8.1-intl php8.1 wget unzip jq openjdk-8-jdk owasp-zap awscli openjdk-11-jdk;
RUN php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');" ; HASH="$(wget -q -O - https://composer.github.io/installer.sig)" ; php -r "if (hash_file('SHA384', 'composer-setup.php') === '$HASH') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;" ; php composer-setup.php --install-dir=/usr/local/bin --filename=composer ; chmod +x /usr/local/bin/composer
